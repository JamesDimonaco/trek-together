# TrekTogether ğŸ”ï¸

**Connect with fellow trekkers and outdoor enthusiasts in your city**

TrekTogether is a location-based chat application that helps outdoor adventurers find and connect with like-minded people in their local area. Join real-time conversations, plan trekking trips, and build a community of outdoor enthusiasts wherever you are.

## ğŸŒŸ Features

### ğŸ—ºï¸ **Location-Based Chat**

- **Automatic city detection** using GPS and Google Maps API
- **City-specific chat rooms** for local trekking communities
- **Real-time messaging** with live user counts
- **Anonymous or authenticated** participation

### ğŸ‘¤ **Flexible User Experience**

- **No signup required** - start chatting immediately as a guest
- **Optional authentication** with Clerk for enhanced features
- **Persistent sessions** - your chats and preferences are remembered
- **Smart username handling** - keep your chosen name when signing up

### ğŸ“± **Smart Navigation**

- **Current city tracking** - always return to your active chat
- **Quick access** from header navigation
- **Continue chat prompts** on homepage for returning users
- **Seamless city switching** with automatic updates

### ğŸ” **Robust Authentication**

- **Multiple sync methods** - webhooks, client-side fallback, and session API
- **Data preservation** - anonymous users keep all data when signing up
- **Zero data loss** during authentication transitions
- **Secure session management** with cookies and database storage

## ğŸš€ Live Demo

ğŸŒ **[Live Application]([YOUR_DEPLOYMENT_URL_HERE])**

## ğŸ› ï¸ Tech Stack

### Frontend

- **Next.js 15** - App Router with server components
- **TypeScript** - Type-safe development
- **Tailwind CSS** - Responsive styling
- **shadcn/ui** - Accessible UI components
- **Lucide React** - Beautiful icons

### Backend & Database

- **Convex** - Real-time database and backend functions
- **Clerk** - Authentication and user management
- **Google Maps API** - Geocoding and location services

### Deployment

- **Vercel** - Frontend hosting and deployment
- **Convex Cloud** - Backend and database hosting

## ğŸƒâ€â™‚ï¸ Quick Start

### Prerequisites

- Node.js 18+ and pnpm
- Google Maps API key
- Clerk account
- Convex account

### 1. Clone the Repository

```bash
git clone [YOUR_REPO_URL_HERE]
cd trail-meet
pnpm install
```

### 2. Environment Setup

Create `.env.local` with:

```bash
# Convex (auto-generated by `npx convex dev`)
NEXT_PUBLIC_CONVEX_URL=your_convex_url
CONVEX_DEPLOYMENT=your_deployment_id

# Clerk Authentication
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key
CLERK_SECRET_KEY=your_clerk_secret_key
CLERK_WEBHOOK_SECRET=your_webhook_secret

# Google Maps API
GOOGLE_MAPS_API_KEY=your_google_maps_api_key
```

### 3. Database Setup

```bash
# Initialize Convex
npx convex dev

# This will:
# - Create your Convex project
# - Deploy database schema
# - Generate TypeScript types
# - Start the development server
```

### 4. Start Development

```bash
# In one terminal - Convex backend
npx convex dev

# In another terminal - Next.js frontend
pnpm dev
```

Visit `http://localhost:3000` to see the application.

## ğŸ“‹ Setup Guide

### Google Maps API Setup

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select existing
3. Enable **Geocoding API**
4. Create credentials (API Key)
5. Add to `.env.local`

### Clerk Authentication Setup

1. Create account at [Clerk](https://clerk.com/)
2. Create new application
3. Copy API keys to `.env.local`
4. Configure webhooks (optional for production):
   - Endpoint: `[YOUR_DOMAIN]/api/webhooks/clerk`
   - Events: `user.created`, `user.updated`, `user.deleted`

### Convex Database Setup

1. Create account at [Convex](https://convex.dev/)
2. Run `npx convex dev` to initialize
3. Database schema will be automatically deployed

## ğŸ—ï¸ Project Structure

```
trail-meet/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/               # API routes
â”‚   â”œâ”€â”€ chat/[cityId]/     # Dynamic chat pages
â”‚   â””â”€â”€ page.tsx           # Landing page
â”œâ”€â”€ components/            # React components
â”‚   â”œâ”€â”€ auth/             # Authentication components
â”‚   â”œâ”€â”€ chat/             # Chat interface components
â”‚   â”œâ”€â”€ landing/          # Landing page components
â”‚   â””â”€â”€ layout/           # Layout components
â”œâ”€â”€ convex/               # Convex backend functions
â”‚   â”œâ”€â”€ schema.ts         # Database schema
â”‚   â”œâ”€â”€ messages.ts       # Message operations
â”‚   â”œâ”€â”€ cities.ts         # City operations
â”‚   â””â”€â”€ users.ts          # User operations
â”œâ”€â”€ lib/                  # Utilities and helpers
â”‚   â”œâ”€â”€ actions/          # Server actions
â”‚   â”œâ”€â”€ helpers/          # API helpers
â”‚   â”œâ”€â”€ utils/            # Utility functions
â”‚   â””â”€â”€ types.ts          # TypeScript types
â””â”€â”€ README.md
```

## ğŸ”„ User Flow

### Anonymous User Journey

1. **Landing** â†’ Location permission or manual entry
2. **City Detection** â†’ Google Maps geocoding
3. **Username Selection** â†’ Optional custom name or stay anonymous
4. **Chat Access** â†’ Immediate participation in city chat

### Authentication Journey

1. **Sign Up/In** â†’ Clerk modal authentication
2. **Data Migration** â†’ Preserve all anonymous data
3. **Enhanced Features** â†’ Profile, direct messages, cross-device sync
4. **Persistent Identity** â†’ Secure account with preserved chat history

## ğŸš€ Deployment

### Vercel Deployment

1. Push code to GitHub
2. Connect repository to Vercel
3. Add environment variables
4. Deploy automatically

### Environment Variables for Production

```bash
# Production URLs
NEXT_PUBLIC_CONVEX_URL=https://your-convex-deployment.convex.cloud
CONVEX_DEPLOYMENT=prod:your-deployment-id

# Same Clerk and Google Maps keys work for production
```

### Webhook Setup for Production

1. **Clerk Dashboard** â†’ Webhooks
2. **Add endpoint**: `https://your-domain.com/api/webhooks/clerk`
3. **Select events**: `user.created`, `user.updated`, `user.deleted`
4. **Copy webhook secret** to `CLERK_WEBHOOK_SECRET`

## ğŸ§ª Development

### Database Schema Updates

```bash
# Make changes to convex/schema.ts
# Run to deploy changes
npx convex dev
```

### Adding New Features

1. **Server Components** - Use for static content and data fetching
2. **Client Components** - Use for interactivity and real-time features
3. **API Routes** - Use for complex server logic and external integrations
4. **Convex Functions** - Use for database operations and real-time updates

## ğŸ”’ Security Features

- **Input validation** on all API endpoints
- **Secure webhook verification** for Clerk events
- **Type-safe database operations** with Convex
- **Sanitized user inputs** and XSS protection
- **Rate limiting** on message sending (built into Convex)

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- **Convex** for the excellent real-time database platform
- **Clerk** for seamless authentication
- **Vercel** for outstanding deployment experience
- **shadcn/ui** for beautiful, accessible components
- **Google Maps** for reliable geocoding services

## ğŸ“ Support

- **Documentation**: [Link to your docs]
- **Issues**: [GitHub Issues URL]
- **Discussions**: [GitHub Discussions URL]
- **Email**: [your-email@example.com]

---

**Built with â¤ï¸ for the outdoor community**
